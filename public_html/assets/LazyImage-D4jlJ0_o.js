import{j as a}from"./ui-DWSvR_GU.js";import{r as t}from"./react-vendor-BC7D1Za-.js";function y({src:s,alt:d,className:l="",placeholder:i="/placeholder.jpg",loading:r="lazy",...p}){const[x,c]=t.useState(i),[n,g]=t.useState(null),[u,o]=t.useState(!1),[f,m]=t.useState(!1);return t.useEffect(()=>{let e;return n&&r==="lazy"?(e=new IntersectionObserver(I=>{I.forEach(b=>{b.isIntersecting&&(m(!0),e.disconnect())})},{rootMargin:"50px 0px",threshold:.1}),e.observe(n)):r==="eager"&&m(!0),()=>{e&&e.disconnect()}},[n,r]),t.useEffect(()=>{if(f&&s){const e=new Image;e.onload=()=>{c(s),o(!0)},e.onerror=()=>{c(i),o(!0)},e.src=s}},[f,s,i]),a.jsxs("div",{ref:g,className:`relative overflow-hidden ${l}`,...p,children:[a.jsx("img",{src:x,alt:d,className:`transition-opacity duration-300 ${u?"opacity-100":"opacity-0"}`,loading:r,onLoad:()=>o(!0)}),!u&&a.jsx("div",{className:"absolute inset-0 bg-muted animate-pulse flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]})}export{y as default};
